@{
    ViewBag.Title = "Home Page";
}
<style>
    .charts-list{
        width:100%;
        display:flex;
        justify-content:space-around;
    }
</style>
<div id="page-wrapper">
    <!--BEGIN CONTENT-->
    <div class="page-content">
        <div id="tab-general">
            <div class="row mbl">
                <div class="col-lg-12">
                    <div class="col-md-12">
                        <div id="area-chart-spline" style="width: 100%; height: 300px; display: none;">
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <!--BEGIN CONTENT-->

                    <div id="main-content">
                        <div class="container-fluid">
                            <!-- BEGIN PAGE HEADER-->
                            <div class="row-fluid">
                                <div class="span12">
                                    <!-- BEGIN THEME CUSTOMIZER-->
                                    <h3 class="page-title" translate style="font-family: BentleySemiBold;">Pending Reports Overview</h3>
                                </div>
                            </div>
                            <div id="page" class="dashboard">
                                <div class="charts-list">
                                    <div class="span6" id="chartsOne" style="height: 400px;"></div>
                                    <div class="span6" id="chartsTwo" style="height: 400px;"></div>
                                </div>
                                <div class="charts-list">
                                    <div class="span6" id="chartsThree" style="height: 400px;"></div>
                                    <div class="span6" id="chartsFour" style="height: 400px;"></div>
                                </div>
                                <!-- END OVERVIEW STATISTIC BARS-->
                            </div>
                            <!-- END PAGE CONTENT-->

                        </div>
                    </div>
                    <!--END CONTENT-->
                </div>
            </div>
        </div>
    </div>
    <!--END CONTENT-->
</div>
@section scripts{
<script src="~/Scripts/api/common.js"></script>
<script src="~/Scripts/api/echarts.js"></script>
<script>
    $("#nav_dash").addClass("active");

    $(function () {
        $.commonGet("MarketAction/MarketActionStatusCountSearch", {
            year: '',
            eventTypeId: 99,
            userId: $("#G_UserId").val(),
            roleTypeCode: $("#G_RoleTypeCode").val()
        }, function (data) {
            $("#UnsubmitBefore21").html(data[0].Before21Count);
            $("#UnsubmitBefore3").html(data[0].Before3Count);
            $("#UnsubmitAfter2").html(data[0].After2Count);
            $("#UnsubmitAfter7").html(data[0].After7Count);
            $("#UnsubmitAfter30").html(data[0].After30Count);
        })

        $.commonGet("MarketAction/ExpenseAccountStatusCountSearch", {
            year: '',
            eventTypeId: 99,
            userId: $("#G_UserId").val(),
            roleTypeCode: $("#G_RoleTypeCode").val()
        }, function (data) {
            var apply = 0, relay = 0;
            if (data && data.length > 0) {
                data.forEach(function (item) {
                    if (item.ApplyStatus == "未提交")
                        apply += 1;
                    if (item.ReplyStatus == "未提交")
                        relay += 1;
                })
            }
            $("#ApplyStatus").html(apply);
            $("#ReplyStatus").html(relay);
        })
        initChartsOne();
        initChartsTwo();
        initChartsThree();
        initChartsFour();
    })

    function initChartsOne() {
        var chartDom = document.getElementById('chartsOne');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            title: {
                text: '市场活动',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                top: '10%',
                left: 'center'
            },
            series: [
                {
                    name: '市场活动',
                    type: 'pie',
                    avoidLabelOverlap: false,
                    radius: '50%',
                    data: [
                        { value: 1048, name: '未提交活动计划' },
                        { value: 735, name: '未通过审批活动计划' },
                        { value: 580, name: '未提交活动报告' },
                        { value: 484, name: '未通过审批活动报告' }
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        option && myChart.setOption(option);
    }

    function initChartsTwo() {
        var chartDom = document.getElementById('chartsTwo');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            title: {
                text: '交车仪式',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                top: '10%',
                left: 'center'
            },
            series: [
                {
                    name: '交车仪式',
                    type: 'pie',
                    avoidLabelOverlap: false,
                    radius: '50%',
                    data: [
                        { value: 1048, name: '未提交活动计划' },
                        { value: 735, name: '未通过审批活动计划' },
                        { value: 580, name: '未提交活动报告' },
                        { value: 484, name: '未通过审批活动报告' }
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        option && myChart.setOption(option);
    }

    function initChartsThree() {
        var chartDom = document.getElementById('chartsThree');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            title: {
                text: '费用报销',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                top: '10%',
                left: 'center',
                data: ['市场活动', '交车仪式']
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    // prettier-ignore
                    data: ['未提交合同', '未提交报价单', '未提交发票', '未提交邮件截图']
                }
            ],
            yAxis: [
                {
                    type: 'value'
                }
            ],
            series: [
                {
                    name: '市场活动',
                    type: 'bar',
                    label: {
                        show: true,
                        position: 'top'
                    },
                    data: [
                        30,80,150,500
                    ],
                },
                {
                    name: '交车仪式',
                    type: 'bar',
                    label: {
                        show: true,
                        position: 'top'
                    },
                    data: [
                        60,30,100,200
                    ]
                }
            ]
        };

        option && myChart.setOption(option);
    }

    function initChartsFour() {
        var chartDom = document.getElementById('chartsFour');
        var myChart = echarts.init(chartDom);
        var option;

        option = {
            title: {
                text: '报告（本月）',
                left: 'center'
            },
            tooltip: {
                trigger: 'item'
            },
            legend: {
                top: '10%',
                left: 'center'
            },
            series: [
                {
                    name: '报告（本月）',
                    type: 'pie',
                    avoidLabelOverlap: false,
                    radius: '50%',
                    data: [
                        { value: 1048, name: '待更新市场花费' },
                        { value: 735, name: '待更新市场基金' },
                        { value: 580, name: '待更新活动数量' },
                        { value: 484, name: '待更新线索数量' }
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        option && myChart.setOption(option);
    }
</script>
}


