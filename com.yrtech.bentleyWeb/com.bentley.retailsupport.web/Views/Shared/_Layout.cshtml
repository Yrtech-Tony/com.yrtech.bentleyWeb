<!DOCTYPE html>
<html ng-app="MyApp">
<head>
    <title translate>Dealer Activity Online Management System</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type='text/javascript'>window.BWEUM || (BWEUM = {}); BWEUM.info = { "stand": true, "agentType": "browser", "agent": "browsercollector.oneapm.com/static/js/bw-send-416.7.31.js", "beaconUrl": "browsercollector.oneapm.com/beacon", "licenseKey": "VrjFJ~FEebem7IUf", "applicationID": 9992229 };</script>
    <script type="text/javascript" src="//browsercollector.oneapm.com/static/js/bw-loader-416.7.31.js"></script>
    <!--Loading bootstrap css--> 
    <link type="text/css" rel="stylesheet" href="/Content/style/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/font-awesome.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="/Scripts/bootstrap-table/bootstrap-table.css">

    <link type="text/css" rel="stylesheet" href="/Scripts/bootstrapValidator/css/bootstrapValidator.min.css">

    <link type="text/css" rel="stylesheet" href="/Content/style/bootstrap-responsive.min.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/bootstrap-toggle-buttons.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/bootstrap-switch.css">
    <link type="text/css" rel="stylesheet" href="/Scripts/bootstrap-select/css/bootstrap-select.min.css">
    <link type="text/css" rel="stylesheet" href="/Scripts/bootstrap3-editable/css/bootstrap-editable.css">
    <link type="text/css" rel="stylesheet" href="/Scripts/bower_components/Font-Awesome/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="/Scripts/bower_components/Font-Awesome/css/checkbox.css">

    <link type="text/css" rel="stylesheet" href="/Content/style/animate.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/all.css">

    <link type="text/css" rel="stylesheet" href="/Content/style/main.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/style.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/style-responsive.css">
    <link type="text/css" rel="stylesheet" href="/Content/style/pace.css">
    <link href="/Content/assets/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
    <link href="/Content/bootstrap-fileinput/css/bootstrap-fileinput.css" rel="stylesheet">

    <script src="/Scripts/Dark/jquery-1.10.2.min.js"></script>

    <script src="/Scripts/bower_components/angular-1.6.4/angular.min.js"></script>
    <script src="/Scripts/bower_components/angular-1.6.4/angular-gettext.min.js"></script>
    <script src="/Scripts/bower_components/angular-1.6.4/po/zh.js?0315"></script>
    <script src="/Scripts/bower_components/angular-1.6.4/po/en.js?0315"></script>
    <script src="/Scripts/bower_components/LanguageCheck.js"></script>

    <script src="/Scripts/jquery.jqprint-0.3.js"></script>
    <script src="/Scripts/jquery-migrate-1.2.1.min.js"></script>

    <style type="text/css" media="print">
        .control-label {
            font-size: 16px;
            font-weight: bold;
        }

        .noprint, .widget-title .tools, #sidebar, #ListVisuals_0__ImgRemark, #VisualDescription, #totop, .icon-plus, table tr td:last-child, table tr th:last-child,
        .btn-dark, .btn-success, .btn-file {
            display: none !important;
        }

        .row .control-label {
            width: 100%;
        }

        form .row.print .col-md-6 {
            width: calc(50% - 15px);
            display: inline-block;
        }

            form .row.print .col-md-6 .col-md-4 {
                zoom: 0.5;
                display: inline-block;
            }
    </style>

    <style>
        .btn-sm {
            padding: 3px 4px !important;
            font-size: 10px !important;
            line-height: 1.0 !important;
            border-radius: 3px !important;
        }

        .pagination-detail {
            display: none !important;
        }

        .btn {
            /*padding: 4px 12px !important;*/
            /*width:90px !important;*/
        }

        table {
            white-space: normal;
            line-height: 100%;
            font-size: 13px;
        }

        #sidebar {
            min-height: 0px !important;
            overflow-y: auto;
        }

        #topbar .navbar-top-links {
            margin-left: 240px;
            margin-right: 15px;
        }

        /*add lipeng 20181210*/
        .settingDb {
            font-size: 14px;
            cursor: pointer;
            padding: 3px 10px;
        }

            .settingDb.hover {
                color: #fff;
                border: 1px solid;
            }

            .settingDb:hover {
                color: #fff;
                border: 1px solid;
            }
    </style>
</head>
<body>
    @{
        com.yrtech.InventoryAPI.DTO.AccountDto LoginUser = null;
        if (Session["LoginUser"] != null)
        {
            LoginUser = (com.yrtech.InventoryAPI.DTO.AccountDto)Session["LoginUser"];
        }
    }
    <input id="G_UserId" type="hidden" value="@LoginUser.UserId" />
    <input id="G_UserAccount" type="hidden" value="@LoginUser.AccountId" />
    <input id="G_RoleTypeCode" type="hidden" value="@LoginUser.RoleTypeCode" />
    <input id="G_AccountName" type="hidden" value="@LoginUser.AccountName" />
    <input id="G_AccountNameEn" type="hidden" value="@LoginUser.AccountNameEn" />
    <input id="G_Email" type="hidden" value="@LoginUser.Email" />
    <input id="G_Shops" type="hidden" value="@Json.Encode(LoginUser.ShopList)" />

    <input id="G_ResetPassword" type="hidden" value="{{'ResetPassword'|translate}}" />
    <input id="G_Update" type="hidden" value="{{'Update'|translate}}" />
    <input id="G_Delete" type="hidden" value="{{'Delete'|translate}}" />
    <input id="G_Add" type="hidden" value="{{'Add'|translate}}" />
    <input id="G_Show" type="hidden" value="{{'Show'|translate}}" />
    <input id="G_NoShow" type="hidden" value="{{'NoShow'|translate}}" />
    <input id="G_Online" type="hidden" value="{{'Online Activities'|translate}}" />
    <input id="G_Offline" type="hidden" value="{{'Offline Activities'|translate}}" />
    <input id="G_promotion_delete" type="hidden" value="{{'Are you sure you want to delete the promotion?'|translate}}" />
    <input id="G_file_delete" type="hidden" value="{{'Are you sure you want to delete the file?'|translate}}" />
    <input id="G_Yes" type="hidden" value="{{'Yes'|translate}}" />
    <input id="G_No" type="hidden" value="{{'No'|translate}}" />
    <input id="G_Info" type="hidden" value="{{'Information'|translate}}" />

    <input id="NO" type="hidden" value="{{'NO'|translate}}" />
    <input id="G_Dealer" type="hidden" value="{{'Dealer'|translate}}" />
    <input id="G_ReimbursementApplication" type="hidden" value="{{'Reimbursement Application'|translate}}" />
    <input id="G_Status" type="hidden" value="{{'Promotion State'|translate}}" />
    <input id="G_ActivityName" type="hidden" value="{{'Event Name'|translate}}" />
    <input id="G_EventType" type="hidden" value="{{'Event Type'|translate}}" />
    <input id="G_StartDate" type="hidden" value="{{'Start Date'|translate}}" />
    <input id="G_EndDate" type="hidden" value="{{'End Date'|translate}}" />
    <input id="G_ThreeWeeksBefore" type="hidden" value="{{'Three Weeks Before'|translate}}" />
    <input id="G_ThreeDaysBefore" type="hidden" value="{{'Three Days Before'|translate}}" />
    <input id="G_Today" type="hidden" value="{{'The Day of the Event'|translate}}" />
    <input id="G_AfterDays2" type="hidden" value="{{'Two Days After'|translate}}" />
    <input id="G_AfterDays7" type="hidden" value="{{'Seven Days After' |translate}}" />
    <input id="G_AfterMonth1" type="hidden" value="{{'One Month After'|translate}}" />
    <input id="G_AfterMonth3" type="hidden" value="{{'After Three Month' |translate}}" />
    <input id="PlanPPT" type="hidden" value="{{'Plan PPT'|translate}}" />
    <input id="FinalPPT" type="hidden" value="{{'Final Programme PPT'|translate}}" />
    <input id="G_OnSiteSign" type="hidden" value="{{'On-site Sign in Sheet'|translate}}" />
    <input id="G_ClueReport" type="hidden" value="{{'Clue Report Excel'|translate}}" />
    <input id="G_EventReport" type="hidden" value="{{'Event Report PPT' |translate}}" />
    <input id="G_UpdateReport" type="hidden" value="{{'Update leads Report Excel'|translate}}" />
    <input id="G_ProofDocument" type="hidden" value="{{'Proof Document' |translate}}" />

    <input id="Draft" type="hidden" value="{{'Unsubmitted'|translate}}" />
    <input id="Pending" type="hidden" value="{{'Pending'|translate}}" />

    <input id="Rejected" type="hidden" value="{{'Rejected'|translate}}" />
    <input id="Qualified" type="hidden" value="{{'Qualified'|translate}}" />
    <input id="Unqualified" type="hidden" value="{{'Unqualified'|translate}}" />
    <input id="Incompleted" type="hidden" value="{{'Incompleted'|translate}}" />

    <input id="ActivityCancel" type="hidden" value="{{'Canceled'|translate}}" />
    <input id="Approved" type="hidden" value="{{'Finished'|translate}}" />
    <input id="Approvaling" type="hidden" value="{{'Processing'|translate}}" />
    <input id="In_Plan" type="hidden" value="{{'In Plan'|translate}}" />

    <input id="G_Edit" type="hidden" value="{{'Edit'|translate}}" />
    <!--END THEME SETTING-->

    <form action="/Account/LogOff" class="navbar-right" id="logoutForm" method="post"></form>
    <!--BEGIN BACK TO TOP-->
    <a id="totop" href="#"><i class="fa fa-angle-up"></i></a>
    <!--END BACK TO TOP-->
    <!--BEGIN TOPBAR-->
    <div id="header-topbar-option-demo" class="page-header-topbar nprint">
        <nav id="topbar" role="navigation" style="margin-bottom: 0;" data-step="3" class="navbar navbar-default navbar-static-top">
            <div class="navbar-header">
                <button type="button" data-toggle="collapse" data-target=".sidebar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
                <a id="logo" href="/Home" class="navbar-brand"><span class="fa fa-rocket"></span><span id="logoTxt" class="logo-text" translate>Operating Platform</span><span style="display: none" class="logo-text-icon">µ</span></a>
            </div>
            <div class="topbar-main">
                <a id="menu-toggle" href="#" class="hidden-xs"><i class="fa fa-bars"></i></a>
                <span id="yearDisplay" style="line-height: 45px; font-size: 28px; font-family: 黑体; color: aquamarine; ">
                    2022
                </span>
                <a href="javascript:openHisData()"><span style="line-height: 35px; font-size: 15px; font-family: 黑体; color: white; text-decoration: underline">2021年数据入口</span></a>
                <ul class="nav navbar navbar-top-links navbar-right mbn">
                    <li class="dropdown topbar-user">
                        <a data-hover="dropdown" href="#" class="dropdown-toggle"><span id="G_userName" class="hidden-xs"></span>&nbsp;<span class="caret"></span></a>
                        <ul class="dropdown-menu dropdown-user pull-right">
                            <li><a href="javascript:" onclick="ChangeLanguage()" id="setLanguage"><i class="fa fa-star"></i><span translate>To Chinese</span></a></li>
                            <li><a href="/Account/ResetPassword"><i class="fa fa-key"></i><span translate>Change Password</span></a></li>
                            <li><a href="/Account/Logout"><i class="fa fa-lock"></i><span translate>Logout</span></a></li>
                            @*<li><a href="javascript:openHisData()"><i class="fa fa-lock"></i><span>2019年数据入口</span></a></li>*@
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <!--END TOPBAR-->
    <div id="wrapper">
        <!--BEGIN SIDEBAR MENU-->
        <nav id="sidebar" role="navigation" data-step="2" data-intro="Template has &lt;b&gt;many navigation styles&lt;/b&gt;"
             data-position="right" class="navbar-default navbar-static-side nprint">
            <div class="sidebar-collapse menu-scroll">
                <ul id="side-menu" class="nav clearfix">
                    <div class="clearfix"></div>
                    @if (LoginUser.RoleTypeCode == "SYSADMIN"
                        || LoginUser.RoleTypeCode == "AREA"
                        || LoginUser.RoleTypeCode == "SHOP")
                    {
                        <li id="nav_dash">
                            <a href="/Home/Index">
                                <i class="fa fa-tachometer fa-fw">
                                    <div class="icon-bg bg-orange"></div>
                                </i>
                                <span class="menu-title" translate>Overview</span>
                            </a>
                        </li>
                        <li id="nav_promotion2">
                            <a href="/Document/Index">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Document Submit</span>
                            </a>
                        </li>

                    }

                    <li id="nav_promotion">
                        <a href="/Marketing/Index">
                            <i class="fa fa-desktop fa-fw">
                                <div class="icon-bg bg-pink"></div>
                            </i>
                            <span class="menu-title" translate>Marketing Events</span>
                        </a>
                    </li>
                    @if (LoginUser.AccountId == "admin")
                    {
                        <li id="nav_dealer_funds">
                            <a href="/DMF/DMFItem">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Dealer Marketing Fund</span>
                            </a>
                        </li>
                    }
                    @if (LoginUser.RoleTypeCode == "SYSADMIN"
                        || LoginUser.RoleTypeCode == "AREA"
                        || LoginUser.RoleTypeCode == "SHOP")
                    {
                        <li id="nav_reimbursement">
                            <a href="/DMF/ExpenseAccount">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Reimbursement</span>
                            </a>
                        </li>
                    }

                    @if (LoginUser.AccountId == "admin")
                    {
                        <li id="nav_IncomeCost">
                            <a href="/DMF/MonthSale">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Monthly Wholesale Condition</span>
                            </a>
                        </li>
                    }
                    @if (LoginUser.RoleTypeCode == "SYSADMIN"
                        || LoginUser.RoleTypeCode == "AREA")
                    {
                        <li id="nav_dealer_funds_ov">
                            <a href="/DMF/DMF">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Marketing Fund Summary (Overview)</span>
                            </a>
                        </li>
                    }
                    @if (LoginUser.AccountId == "admin"
                        || LoginUser.RoleTypeCode == "SHOP")
                    {
                        <li id="nav_budget_cost">
                            <a href="/DMF/DMFDetail">
                                <i class="fa fa-desktop fa-fw">
                                    <div class="icon-bg bg-pink"></div>
                                </i>
                                <span class="menu-title" translate>Budget and Expense</span>
                            </a>
                        </li>
                    }
                    @if (LoginUser.AccountId == "admin")
                    {

                        <li id="nav_user">
                            <a href="/Home/ManageUsers">
                                <i class="fa fa-edit fa-fw">
                                    <div class="icon-bg bg-violet"></div>
                                </i>
                                <span class="menu-title" translate>User Management</span>
                            </a>

                        </li>


                        <li id="nav_area">
                            <a href="/Home/ManageArea">
                                <i class="fa fa-th-list fa-fw">
                                    <div class="icon-bg bg-blue"></div>
                                </i>
                                <span class="menu-title" translate>Area Management</span>
                            </a>

                        </li>


                        <li id="nav_dealer">
                            <a href="/Home/ManageAgent">
                                <i class="fa fa-database fa-fw">
                                    <div class="icon-bg bg-red"></div>
                                </i>
                                <span class="menu-title" translate>Dealer Management</span>
                            </a>

                        </li>

                        <li id="nav_promotiontype">
                            <a href="/Home/ManageActionType">
                                <i class="fa fa-file-o fa-fw">
                                    <div class="icon-bg bg-yellow"></div>
                                </i>
                                <span class="menu-title" translate>Event Type Management</span>
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </nav>
        @RenderBody()

        <form id="tokenForm">
            <input id="token" name="token" type="hidden" value="" />
        </form>
    </div>

    <script src="/Scripts/Dark/jquery-migrate-1.2.1.min.js"></script>
    <script type="text/javascript" src="/Scripts/Dark/bootstrap.min.js"></script>
    <script src="/Scripts/bootstrapValidator/js/bootstrapValidator.min.js"></script>
    <script src="/Scripts/bootstrapValidator/js/language/zh_CN.js"></script>
    <script src="/Scripts/Dark/bootstrap-hover-dropdown.js"></script>
    <script src="/Scripts/bootstrap-fileinput/js/bootstrap-fileinput.js"></script>

    <script src="/Scripts/Dark/html5shiv.js"></script>
    <script src="/Scripts/Dark/respond.min.js"></script>
    <script src="/Scripts/Dark/jquery.metisMenu.js"></script>
    <script src="/Scripts/Dark/jquery.slimscroll.js"></script>
    <script src="/Scripts/Dark/jquery.cookie.js"></script>
    <script src="/Scripts/Dark/custom.min.js"></script>

    <script src="/Scripts/Dark/jquery.menu.js"></script>
    <script src="/Scripts/Dark/pace.min.js"></script>
    <script src="/Scripts/Dark/holder.js"></script>
    <script src="/Scripts/Dark/responsive-tabs.js"></script>
    <script src="/Scripts/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script src="/Scripts/bootstrap-table/bootstrap-table.js"></script>
    <script src="/Scripts/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="/Scripts/bower_components/layer/layer.js"></script>
    <script src="/Scripts/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <script src="/Scripts/bootstrap-table/extensions/editable/bootstrap-table-editable.min.js"></script>

    <!--LOADING SCRIPTS FOR CHARTS-->
    <script src="/Scripts/Dark/bootstrap-toggleButtons.js"></script>
    <script src="/Scripts/Dark/bootstrap-switch.min.js"></script>


    <script type="text/javascript" src="/Content/assets/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
    <script type="text/javascript" src="/Content/assets/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js" charset="UTF-8"></script>

    <script type="text/javascript" src="/Scripts/bower_components/jquery.serializejson.min.js" charset="UTF-8"></script>

    <!--CORE JAVASCRIPT-->
    <script src="/Scripts/Dark/main.js"></script>

    <script>
        $(function () {
            $("#yearDisplay").html(year);

            window.onbeforeprint = function () {
                //图片项的缩放
                $("form .row").each(function (index, item) {
                    var $this = $(this);
                    if ($this.find(".col-md-4 .fileinput").length != 0) {
                        $this.addClass("print");
                    }

                    $this.find(".col-md-4").each(function (index, item2) {
                        if ($(item2).find("img").attr("src") == "/Content/bootstrap-fileinput/img/noimage.png") {
                            $(item2).addClass("noprint");
                        }
                        else {
                            if ($(item2).find("textarea").text() == "") {
                                $(item2).find("textarea").addClass("noprint");
                            }
                        }

                    });
                });
            };

            window.onafterprint = function () {
                $(".print").removeClass("print");
                $(".noprint").removeClass("noprint");
            };

        });
    </script>
    <script src="~/Scripts/crypto-js.js"></script>
    <script>

        var app = angular.module("MyApp", ['gettext']);
        angular.module('MyApp').run(function (gettextCatalog) {
            if (isZH()) {
                gettextCatalog.currentLanguage = 'zh';
            }
            else {
                gettextCatalog.currentLanguage = 'en';
            }

            var ov = gettextCatalog.getString('Overview');
            if (ov && $('.nav_name').length >= 3) {
                $('.nav_name')[0].innerText = ov;
                $('.nav_name')[1].innerText = ov;
                $('.nav_name')[2].innerText = ov;
            }

            $("#G_userName").text(gettextCatalog.currentLanguage == 'zh' ? $("#G_AccountName").val() : $("#G_AccountNameEn").val());
        });
    </script>

    <script type="text/javascript">
        var csstxt = isZH() ? "'黑体'" : "'BentleyRegular'";
        $("body").css("font-family", isZH() ? "'黑体'" : "'BentleyRegular'");
        $("li[id]").css("font-family", csstxt);
        $("#logoTxt").css("font-family", csstxt);
        $(".page-title").css("font-family", csstxt);
        // 对Date的扩展，将 Date 转化为指定格式的String
        // 月(M)、日(d)、小时(h)、分(m)、秒(s)、季度(q) 可以用 1-2 个占位符，
        // 年(y)可以用 1-4 个占位符，毫秒(S)只能用 1 个占位符(是 1-3 位的数字)
        // 例子：
        // (new Date()).Format("yyyy-MM-dd hh:mm:ss.S") ==> 2006-07-02 08:09:04.423
        // (new Date()).Format("yyyy-M-d h:m:s.S")      ==> 2006-7-2 8:9:4.18
        Date.prototype.Format = function (fmt) { //author: meizz
            var o = {
                "M+": this.getMonth() + 1, //月份
                "d+": this.getDate(), //日
                "h+": this.getHours(), //小时
                "m+": this.getMinutes(), //分
                "s+": this.getSeconds(), //秒
                "q+": Math.floor((this.getMonth() + 3) / 3), //季度
                "S": this.getMilliseconds() //毫秒
            };
            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
            for (var k in o)
                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            return fmt;
        }

        function ShowDiv() {
            if ($('.widget-body')[0].style.display == 'none') {
                $('.widget-body')[0].style.display = 'block';
            }
            else {
                $('.widget-body')[0].style.display = 'none';
            }
        }
        function ChangeLanguage() {
            if (isZH()) {
                setLanguage('en');
            }
            else {
                setLanguage('zh');
            }

            setTimeout("window.location.reload()", 200);
        }

        function openHisData() {
            var email = $("#G_Email").val();
            //$.get("http://retailmarketing.bentleydmn.com:8099/Token/api/Token/TokenCreate", {
            $.get("http://39.106.71.65:8099/Token/api/Token/TokenCreate", {
                encryptString: email || ''
            }, function (data) {
                if (data && data.Status) {
                    $("#tokenForm").attr("action", "http://39.106.71.65:8021/Account/TokenLogin");
                    $("#tokenForm").attr("method", "post");
                    $("#token").val(data.Body);
                    $("#tokenForm").submit();
                } else {
                    console.log(" execute error " + data.Body);
                }
            }).error(function (jqXHR, textStatus, errorThrown) {
                console.log(url + " execute error ");
            })         
        }

        //切换数据库
        //lipeng add 20181210
        $(function () {
            var roleName = $('#G_RoleTypeCode').val();

            $(".settingDb").on("click", function () {
                var path = $(this).attr("data-path");
            });

            $.fn.serializeObject = function () {
                var obj = {};
                var arr = $(this).serializeArray();
                for (i in arr) {
                    obj[arr[i].name] = arr[i].value;
                }
                return obj;
            }

            /**
            * 将josn对象赋值给form
            */
            $.fn.setForm = function (jsonValue) {
                var obj = this;
                $.each(jsonValue, function (name, ival) {
                    var $oinput = obj.find("input[name=" + name + "]");
                    if ($oinput.attr("type") == "checkbox") {
                        if (ival !== null) {
                            var checkboxObj = $("[name=" + name + "]");
                            var checkArray = ival.split(";");
                            for (var i = 0; i < checkboxObj.length; i++) {
                                $(checkboxObj[i]).removeAttr("checked");
                                for (var j = 0; j < checkArray.length; j++) {
                                    if (checkboxObj[i].value == checkArray[j]) {
                                        checkboxObj[i].click();
                                    }
                                }
                            }
                        }
                    }
                    else if ($oinput.attr("type") == "radio") {
                        $oinput.each(function () {
                            var radioObj = $("[name=" + name + "]");
                            for (var i = 0; i < radioObj.length; i++) {
                                if (radioObj[i].value == ival) {
                                    radioObj[i].click();
                                }
                            }
                        });
                    }
                    else if ($oinput.attr("type") == "textarea") {
                        obj.find("[name=" + name + "]").html(ival);
                    }
                    else {
                        obj.find("[name=" + name + "]").val(ival);
                    }
                })
            }
        });

        function loadShops() {
            try {
                var shops = $('#G_Shops').val();
                shops = JSON.parse(shops);

                return shops;
            } catch (e) {
                console.log(e);
            }
        }


        /*
         取窗口可视范围的高度
        */
        function getClientHeight() {
            var clientHeight = 0;
            if (document.body.clientHeight && document.documentElement.clientHeight) {
                //clientHeight = (document.body.clientHeight > document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
                clientHeight = document.documentElement.clientHeight;
            }
            else {
                //clientHeight = (document.body.clientHeight > document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
                clientHeight = document.documentElement.clientHeight;
            }
            return clientHeight;
        }

        FileReader.prototype.readAsBinaryString = function (fileData) {
            var binary = "";
            var pt = this;
            var reader = new FileReader();
            reader.onload = function (e) {
                var bytes = new Uint8Array(reader.result);
                var length = bytes.byteLength;
                for (var i = 0; i < length; i++) {
                    binary += String.fromCharCode(bytes[i]);
                }
                pt.content = binary;
                pt.onload(pt); //页面内data取pt.content文件内容
            }
            reader.readAsArrayBuffer(fileData);
        }
    </script>

    @RenderSection("scripts", required: false)
</body>

</html>
